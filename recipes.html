<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>๐ฝ๏ธ ูุตูุงุช ุตุญูุฉ</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .recipe-img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    .card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin: 10px;
      background: #fff;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
    }
  </style>
</head>
<body>

<header>
  <h1>๐ฝ๏ธ ูุตูุงุช ุตุญูุฉ</h1>
  <nav>
    <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
    <a href="recipes.html" class="active">ุงููุตูุงุช</a>
  </nav>
</header>

<!-- ููุฑู ูุฅุถุงูุฉ ูุตูุฉ ุฌุฏูุฏุฉ -->
<section class="card">
  <h2>โ ุฃุถู ูุตูุฉ ุฌุฏูุฏุฉ</h2>
  <form id="recipeForm">
    <label>ุงุณู ุงููุตูุฉ:</label>
    <input type="text" id="recipeName" required>

    <label>ุงูููููุงุช:</label>
    <textarea id="ingredients" required></textarea>

    <label>ุงูุณุนุฑุงุช:</label>
    <input type="number" id="calories" required>

    <label>ุงูุจุฑูุชูู (g):</label>
    <input type="number" id="protein" required>

    <label>ููุน ุงููุฌุจุฉ:</label>
    <select id="mealType" required>
      <option value="ูุทุงุฑ">ูุทุงุฑ</option>
      <option value="ุบุฏุงุก">ุบุฏุงุก</option>
      <option value="ุนุดุงุก">ุนุดุงุก</option>
    </select>

    <label>ุฑุงุจุท ุงูุตูุฑุฉ:</label>
    <input type="text" id="imgUrl" placeholder="ูุซุงู: images/oats.jpg">

    <button type="submit" class="btn primary">๐พ ุญูุธ ุงููุตูุฉ</button>
  </form>
</section>

<!-- ุฃุฏูุงุช ุงูููุชุฑุฉ -->
<section class="card">
  <h2>๐ ููุชุฑุฉ ุงููุตูุงุช</h2>
  <label>ุงุจุญุซ ุจุงุณู ุงููุตูุฉ:</label>
  <input type="text" id="searchInput" placeholder="ูุซุงู: ุดููุงู">

  <label>ููุน ุงููุฌุจุฉ:</label>
  <select id="filterMealType">
    <option value="">ุงููู</option>
    <option value="ูุทุงุฑ">ูุทุงุฑ</option>
    <option value="ุบุฏุงุก">ุบุฏุงุก</option>
    <option value="ุนุดุงุก">ุนุดุงุก</option>
  </select>

  <label>ุฃูุตู ุณุนุฑุงุช:</label>
  <input type="number" id="maxCalories" placeholder="ูุซุงู: 400">

  <label>ุฃุฏูู ุจุฑูุชูู (g):</label>
  <input type="number" id="minProtein" placeholder="ูุซุงู: 20">

  <button onclick="filterRecipes()" class="btn primary">ุชุทุจูู ุงูููุชุฑุฉ</button>
</section>

<!-- ุนุฑุถ ุงููุตูุงุช -->
<section class="grid" id="recipesList"></section>

<script>
// ุฌูุจ ุงููุตูุงุช ูู ุงูุชุฎุฒูู ุฃู ุฅูุดุงุก ุฌุฏูุฏุฉ
let recipes = JSON.parse(localStorage.getItem("recipes")) || [];

// ุนุฑุถ ุงููุตูุงุช
function displayRecipes(list){
  const container = document.getElementById("recipesList");
  container.innerHTML = "";
  list.forEach((r, i) => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${r.img}" alt="${r.name}" class="recipe-img">
      <h3>${r.name} (${r.type})</h3>
      <p>${r.ingredients}</p>
      <p>ุงูุณุนุฑุงุช: ${r.calories} | ุจุฑูุชูู: ${r.protein}g</p>
      <button onclick="deleteRecipe(${i})" class="btn danger">๐๏ธ ุญุฐู</button>
    `;
    container.appendChild(card);
  });
}

// ุฅุถุงูุฉ ูุตูุฉ ุฌุฏูุฏุฉ
document.getElementById("recipeForm").addEventListener("submit", function(e){
  e.preventDefault();
  const name = document.getElementById("recipeName").value;
  const ingredients = document.getElementById("ingredients").value;
  const calories = document.getElementById("calories").value;
  const protein = document.getElementById("protein").value;
  const type = document.getElementById("mealType").value;
  const img = document.getElementById("imgUrl").value || "images/default.jpg";

  recipes.push({name, ingredients, calories, protein, type, img});
  localStorage.setItem("recipes", JSON.stringify(recipes));

  alert("โ ุชู ุฅุถุงูุฉ ุงููุตูุฉ ุจูุฌุงุญ!");
  displayRecipes(recipes);
});

// ุญุฐู ูุตูุฉ
function deleteRecipe(index){
  recipes.splice(index, 1);
  localStorage.setItem("recipes", JSON.stringify(recipes));
  displayRecipes(recipes);
}

// ููุชุฑุฉ ุงููุตูุงุช
function filterRecipes(){
  const search = document.getElementById("searchInput").value.toLowerCase();
  const mealType = document.getElementById("filterMealType").value;
  const maxCalories = document.getElementById("maxCalories").value;
  const minProtein = document.getElementById("minProtein").value;

  let filtered = recipes.filter(r => {
    return (
      (search === "" || r.name.toLowerCase().includes(search)) &&
      (mealType === "" || r.type === mealType) &&
      (maxCalories === "" || r.calories <= maxCalories) &&
      (minProtein === "" || r.protein >= minProtein)
    );
  });

  displayRecipes(filtered);
}

// ุนุฑุถ ุฃููู
displayRecipes(recipes);
</script>

</body>
</html>
