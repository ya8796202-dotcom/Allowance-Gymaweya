<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“Š Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© â€” Ù…ÙˆÙ‚Ø¹ ÙŠØ§Ø³Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ</title>
  <link rel="stylesheet" href="style.css">
  <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header>
  <h1>ğŸ“Š Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªÙ‚Ø¯Ù…</h1>
  <nav>
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="workouts.html">Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</a>
    <a href="nutrition.html">Ø§Ù„ØªØºØ°ÙŠØ©</a>
    <a href="recovery.html">Ø§Ù„Ø±Ø§Ø­Ø©</a>
    <a href="progress.html" class="active">Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</a>
  </nav>
</header>

<section class="hero">
  <h2>Ø³Ø¬Ù„ ÙˆØ²Ù†Ùƒ ÙˆØ¹Ø¯Ø§ØªÙƒ ÙˆØ´ÙˆÙ ØªØ·ÙˆØ±Ùƒ ğŸ’ª</h2>
</section>

<section class="card">
  <h3>ğŸ“ Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</h3>
  <label>Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…):</label>
  <input type="number" id="weight" placeholder="Ù…Ø«Ø§Ù„: 75">

  <label>Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª (Ù…Ø«Ø§Ù„ Bench Press):</label>
  <input type="number" id="reps" placeholder="Ù…Ø«Ø§Ù„: 10">

  <button class="btn primary" onclick="saveProgress()">Ø§Ø­ÙØ¸</button>
</section>

<section class="card">
  <h3>ğŸ“Š Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„ØªÙ‚Ø¯Ù…</h3>
  <canvas id="progressChart" width="400" height="200"></canvas>
</section>

<script>
function saveProgress(){
  const w = document.getElementById('weight').value;
  const r = document.getElementById('reps').value;

  if(!w || !r){ alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"); return; }

  // Ø­ÙØ¸ ÙÙŠ localStorage
  let logs = JSON.parse(localStorage.getItem("yasser_progress")) || [];
  logs.push({date: new Date().toLocaleDateString(), weight: w, reps: r});
  localStorage.setItem("yasser_progress", JSON.stringify(logs));

  drawChart();
}

function drawChart(){
  let logs = JSON.parse(localStorage.getItem("yasser_progress")) || [];
  let dates = logs.map(l => l.date);
  let weights = logs.map(l => l.weight);
  let reps = logs.map(l => l.reps);

  const ctx = document.getElementById('progressChart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: dates,
      datasets: [
        {
          label: 'Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)',
          data: weights,
          borderColor: '#0ea5e9',
          fill: false
        },
        {
          label: 'Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª',
          data: reps,
          borderColor: '#22c55e',
          fill: false
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'bottom' }
      }
    }
  });
}

// Ø±Ø³Ù… Ø£ÙˆÙ„ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
drawChart();
</script>

</body>
</html>
<script>
const user = localStorage.getItem("loggedInUser");
if(!user){
  alert("âš ï¸ Ù„Ø§Ø²Ù… ØªØ³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„");
  window.location.href = "login.html";
} else {
  document.body.innerHTML += `<p>Ø£Ù‡Ù„Ø§Ù‹ ${user} ğŸ‘‹ØŒ Ø¯Ù‡ ØªÙ‚Ø¯Ù…Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ:</p>`;
}
</script>
