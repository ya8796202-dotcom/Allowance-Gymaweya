<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ðŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>ðŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªÙ‚Ø¯Ù…</h1>
  <nav>
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="workout.html">Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</a>
    <a href="nutrition.html">Ø§Ù„ØªØºØ°ÙŠØ©</a>
    <a href="rest.html">Ø§Ù„Ø±Ø§Ø­Ø©</a>
    <a href="progress.html">Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</a>
    <a href="stats.html" class="active">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</a>
  </nav>
</header>

<section class="card">
  <h2>ÙˆØ²Ù†Ùƒ</h2>
  <canvas id="weightChart"></canvas>
</section>

<section class="card">
  <h2>Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h2>
  <canvas id="caloriesChart"></canvas>
</section>

<section class="card">
  <h2>Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</h2>
  <canvas id="workoutsChart"></canvas>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const user = localStorage.getItem("loggedInUser") || "guest";

// Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© Ù…Ù† progress.html
const weight = localStorage.getItem(user + "_weight") || 0;
const calories = localStorage.getItem(user + "_calories") || 0;
const workouts = localStorage.getItem(user + "_workouts") || 0;

// Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„ÙˆØ²Ù†
const weightCtx = document.getElementById('weightChart').getContext('2d');
new Chart(weightCtx, {
  type: 'line',
  data: {
    labels: ['Ø§Ù„ÙŠÙˆÙ…'],
    datasets: [{
      label: 'Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)',
      data: [weight],
      borderColor: '#0ea5e9',
      fill: false
    }]
  }
});

// Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø³Ø¹Ø±Ø§Øª
const caloriesCtx = document.getElementById('caloriesChart').getContext('2d');
new Chart(caloriesCtx, {
  type: 'bar',
  data: {
    labels: ['Ø§Ù„ÙŠÙˆÙ…'],
    datasets: [{
      label: 'Ø§Ù„Ø³Ø¹Ø±Ø§Øª (ÙƒØ§Ù„ÙˆØ±ÙŠ)',
      data: [calories],
      backgroundColor: '#22c55e'
    }]
  }
});

// Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†
const workoutsCtx = document.getElementById('workoutsChart').getContext('2d');
new Chart(workoutsCtx, {
  type: 'doughnut',
  data: {
    labels: ['ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…'],
    datasets: [{
      label: 'Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†',
      data: [workouts],
      backgroundColor: ['#f97316']
    }]
  }
});
</script>

</body>
</html>


<script>
const user = localStorage.getItem("loggedInUser") || "guest";

// Ø¬Ù„Ø¨ Ø§Ù„Ø³Ø¬Ù„Ø§Øª
const weightHistory = JSON.parse(localStorage.getItem(user + "_weightHistory")) || [];
const caloriesHistory = JSON.parse(localStorage.getItem(user + "_caloriesHistory")) || [];
const workoutsHistory = JSON.parse(localStorage.getItem(user + "_workoutsHistory")) || [];

// Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„ÙˆØ²Ù†
new Chart(document.getElementById('weightChart'), {
  type: 'line',
  data: {
    labels: weightHistory.map((_, i) => "Ø§Ù„ÙŠÙˆÙ… " + (i+1)),
    datasets: [{
      label: 'Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)',
      data: weightHistory,
      borderColor: '#0ea5e9',
      fill: false
    }]
  }
});

// Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø³Ø¹Ø±Ø§Øª
new Chart(document.getElementById('caloriesChart'), {
  type: 'bar',
  data: {
    labels: caloriesHistory.map((_, i) => "Ø§Ù„ÙŠÙˆÙ… " + (i+1)),
    datasets: [{
      label: 'Ø§Ù„Ø³Ø¹Ø±Ø§Øª (ÙƒØ§Ù„ÙˆØ±ÙŠ)',
      data: caloriesHistory,
      backgroundColor: '#22c55e'
    }]
  }
});

// Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„ØªÙ…Ø§Ø±ÙŠÙ†
new Chart(document.getElementById('workoutsChart'), {
  type: 'doughnut',
  data: {
    labels: ["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†"],
    datasets: [{
      label: 'Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†',
      data: [workoutsHistory.reduce((a,b)=>a+parseInt(b),0)],
      backgroundColor: ['#f97316']
    }]
  }
});
</script>
